# 机票价格数据源说明 ✈️

## 当前实现状态

### 1. 价格数据来源
- **现状**: 使用增强模拟价格系统
- **航空公司**: 基于真实航线选择的相应航空公司
- **航班路线**: 中国主要城市 → 欧洲目的地城市
- **更新时间**: 实时生成（每次查询）

### 2. 支持的航空公司信息 🏢

#### 亚洲航线
- **CA** - 中国国际航空 (A350)
- **MU** - 中国东方航空 (B777)  
- **CZ** - 中国南方航空 (A380)
- **SQ** - 新加坡航空 (A350)
- **CX** - 国泰航空 (B777)

#### 欧洲航线
- **LH** - 汉莎航空 (A320)
- **AF** - 法国航空 (A350)
- **KL** - 荷兰皇家航空 (B787)
- **BA** - 英国航空 (A380)
- **OS** - 奥地利航空 (A320)

#### 美洲航线
- **AA** - 美国航空
- **DL** - 达美航空  
- **UA** - 美联航

### 3. 价格计算逻辑 💰

#### 基础定价
- **经济舱**: 基准价格
- **商务舱**: 基准价格 × 2.8
- **头等舱**: 基准价格 × 4.5

#### 影响因素
- **距离**: 基于实际航线距离计算
- **目的地溢价**: 热门城市价格上浮
- **季节性调整**: 旺季(7,8,12,1月) 20%涨幅
- **价格波动**: ±15% 随机变化模拟市场波动

### 4. 数据源标识

#### 当前显示
```
📊 Enhanced Simulation (Amadeus API credentials required for real-time data)
更新时间: 2024-11-04 11:20:33
```

#### 真实API启用后将显示
```
📊 Amadeus Real-time API
更新时间: 实际API响应时间
航空公司: 真实航班信息
```

### 5. 如何启用真实数据 🔑

#### 步骤1: 注册Amadeus开发者账户
1. 访问 https://developers.amadeus.com/
2. 注册免费开发者账户
3. 创建新的应用程序
4. 获取 API Key 和 API Secret

#### 步骤2: 配置环境变量
```bash
# 在项目根目录创建 .env 文件
AMADEUS_API_KEY=your_api_key_here
AMADEUS_API_SECRET=your_api_secret_here
```

#### 步骤3: 重启应用
配置完成后重启应用，系统将自动切换到真实API数据

### 6. API配额限制 📊
- **免费账户**: 1000次请求/月
- **付费账户**: 根据订阅计划
- **缓存机制**: 1小时内相同查询使用缓存数据

### 7. 航班路线信息 🗺️

当前支持的出发地到目的地路线：
- 中国各大城市 → 欧洲13个热门城市
- 包含直飞和中转航班信息
- 显示具体航空公司和机型

### 8. 数据质量保证 ✅

#### 模拟数据特点
- 基于真实市场价格模型
- 考虑距离、季节、需求等因素
- 航空公司选择符合实际航线分布
- 价格波动反映真实市场情况

#### 真实数据特点（API启用后）
- 实时航班搜索结果
- 真实航空公司报价
- 准确的舱位等级价格
- 实际可预订的航班

---

## 常见问题 ❓

**Q: 现在显示的价格是真实的吗？**
A: 当前使用增强模拟价格，基于真实市场数据建模，但不是实时API价格。

**Q: 如何获得真实价格？**  
A: 按照上述步骤5配置Amadeus API即可获得真实价格。

**Q: 航空公司信息准确吗？**
A: 航空公司选择基于实际航线分布，但具体航班需要API验证。

**Q: 价格多久更新一次？**
A: 模拟价格实时生成，真实API价格缓存1小时。

---

*最后更新: 2024-11-04*